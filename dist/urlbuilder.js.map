{"version":3,"sources":["../src/urlbuilder.js"],"names":["UrlBuilder","apikey","sensorid","targets","arr","streamid","map","x","target","join","console","info","push","url","buildUrl","str","baseUrl","opt","i","length","query"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kCAEaA,U;AAET,oCAAYC,MAAZ,EAAoBC,QAApB,EAA8B;AAAA;;AAC1B,yBAAKD,MAAL,GAAcA,MAAd;AACA,yBAAKC,QAAL,GAAgBA,QAAhB;AACH;;;;kDAEaC,O,EAAS;AACnB,4BAAIC,MAAM,EAAV;;AAEA,4BAAIC,WAAW,IAAf;AACA,4BAAIF,OAAJ,EAAa;AACTE,uCAAWF,QAAQG,GAAR,CAAY;AAAA,uCAAKC,EAAEC,MAAP;AAAA,6BAAZ,EAA2BC,IAA3B,CAAgC,GAAhC,CAAX;AACH;;AAEDC,gCAAQC,IAAR,CAAa,UAAb;AACAD,gCAAQC,IAAR,CAAaN,QAAb;;AAEA,4BAAI,CAACA,QAAL,EACIA,WAAW,KAAKH,QAAhB;;AAEJQ,gCAAQC,IAAR,CAAa,cAAcN,QAA3B;AACAD,4BAAIQ,IAAJ,CAAS,QAAQP,QAAjB;;AAEAD,4BAAIQ,IAAJ,CAAS,uBAAT;;AAEA;AACA;;AAEA;AACA,4BAAIC,MAAM,KAAKC,QAAL,CAAc,UAAd,EAA0BV,GAA1B,CAAV;;AAEAM,gCAAQC,IAAR,CAAa,SAASE,GAAtB;AACA,+BAAOA,GAAP;AACH;;;6CAEQE,G,EAAKX,G,EAAK;AACf,4BAAIY,UAAU,uCAAd;AACA,4BAAIH,MAAMG,UAAUD,GAApB;;AAEA,4BAAIE,MAAM,EAAV;;AAEA,4BAAI,KAAKhB,MAAL,IAAe,EAAnB,EACIgB,IAAIL,IAAJ,CAAS,YAAY,KAAKX,MAA1B;;AAEJ,4BAAIG,GAAJ,EAAS;AACL,iCAAK,IAAIc,IAAI,CAAb,EAAgBA,IAAId,IAAIe,MAAxB,EAAgC,EAAED,CAAlC;AACID,oCAAIL,IAAJ,CAASR,IAAIc,CAAJ,CAAT;AADJ;AAEH;;AAED,4BAAID,IAAIE,MAAJ,GAAa,CAAjB,EAAoB;AAChB,gCAAIC,QAAQH,IAAIR,IAAJ,CAAS,GAAT,CAAZ;AACAI,mCAAO,MAAMO,KAAb;AACH;;AAEDV,gCAAQC,IAAR,CAAa,UAAUE,GAAvB;AACA,+BAAOA,GAAP;AACH","file":"urlbuilder.js","sourcesContent":["\n\nexport class UrlBuilder {\n\n    constructor(apikey, sensorid) {\n        this.apikey = apikey;\n        this.sensorid = sensorid;\n    }\n\n    buildQueryUrl(targets) {\n        var arr = [];\n\n        var streamid = null;\n        if (targets) {\n            streamid = targets.map(x => x.target).join(\",\");\n        }\n\n        console.info('streamid');\n        console.info(streamid);\n\n        if (!streamid)\n            streamid = this.sensorid;\n\n        console.info('streamid=' + streamid);\n        arr.push('id=' + streamid);\n\n        arr.push('properties=resulttype');\n\n        // only request scalars\n        //arr.push('resulttype=scalarvalue');\n\n        // api url\n        var url = this.buildUrl(\"/streams\", arr);\n\n        console.info(\"URL=\" + url);\n        return url;\n    }\n\n    buildUrl(str, arr) {\n        var baseUrl = \"https://sensor-cloud.io/api/sensor/v2\";\n        var url = baseUrl + str;\n\n        var opt = [];\n\n        if (this.apikey != \"\")\n            opt.push('apikey=' + this.apikey);\n\n        if (arr) {\n            for (var i = 0; i < arr.length; ++i)\n                opt.push(arr[i]);\n        }\n\n        if (opt.length > 0) {\n            var query = opt.join('&');\n            url += '?' + query\n        }\n\n        console.info('url: ' + url);\n        return url;\n    }\n}\n"]}